/*
 * task-pantalla.c
 *
 *  Created on: 22 sep. 2019
 *      Author: Gaston
 */
#include "../main/main.h"
#include "../inc/UTFT/UTFT.h"
#include "../inc/UTFT/DefaultFonts.h"
int sin4[]={123,126,128,131,134,137,140,142,145,148,150,153,156,158,161,163,166,168,171,173,175,177,180,182,184,186,188,189,191,193,194,196,197,199,200,201,203,204,205,206,206,207,208,208,209,209,210,210,210,210,210,210,210,209,209,208,208,207,206,206,205,204,203,201,200,199,197,196,194,193,191,189,188,186,184,182,180,177,175,173,171,168,166,163,161,158,156,153,150,148,145,142,140,137,134,131,128,126,123,120,117,114,112,109,106,103,100,98,95,92,90,87,84,82,79,77,74,72,69,67,65,63,60,58,56,54,52,51,49,47,46,44,43,41,40,39,37,36,35,34,34,33,32,32,31,31,30,30,30,30,30,30,30,31,31,32,32,33,34,34,35,36,37,39,40,41,43,44,46,47,49,51,52,54,56,58,60,63,65,67,69,72,74,77,79,82,84,87,90,92,95,98,100,103,106,109,112,114,117,120,123,126,128,131,134,137,140,142,145,148,150,153,156,158,161,163,166,168,171,173,175,177,180,182,184,186,188,189,191,193,194,196,197,199,200,201,203,204,205,206,206,207,208,208,209,209,210,210,210,210,210,210,210,209,209,208,208,207,206,206,205,204,203,201,200,199,197,196,194,193,191,189,188,186,184,182,180,177,175,173,171,168,166,163,161,158,156,153,150,148,145,142,140,137,134,131,128,126,123,120,117,114,112,109,106,103,100,98,95,92,90,87,84,82,79,77,74,72,69,67,65,63,60,58,56,54,52,51,49,47,46,44,43,41,40,39,37,36,35,34,34,33,32,32,31,31,30,30,30,30,30,30,30,31,31,32,32,33,34,34,35,36,37,39,40,41,43,44,46,47,49,51,52,54,56,58,60,63,65,67,69,72,74,77,79,82,84,87,90,92,95,98,100,103,106,109,112,114,117,120};
int sin[]={135,150,164,178,191,202,212,221,229,234,238,240,240,238,234,229,221,212,202,191,178,164,150,135,120,105,90,76,62,49,38,28,19,11,6,2,0,0,2,6,11,19,28,38,49,62,76,90,105,120,135,150,164,178,191,202,212,221,229,234,238,240,240,238,234,229,221,212,202,191,178,164,150,135,120,105,90,76,62,49,38,28,19,11,6,2,0,0,2,6,11,19,28,38,49,62,76,90,105,120,135,150,164,178,191,202,212,221,229,234,238,240,240,238,234,229,221,212,202,191,178,164,150,135,120,105,90,76,62,49,38,28,19,11,6,2,0,0,2,6,11,19,28,38,49,62,76,90,105,120,135,150,164,178,191,202,212,221,229,234,238,240,240,238,234,229,221,212,202,191,178,164,150,135,120,105,90,76,62,49,38,28,19,11,6,2,0,0,2,6,11,19,28,38,49,62,76,90,105,120,135,150,164,178,191,202,212,221,229,234,238,240,240,238,234,229,221,212,202,191,178,164,150,135,120,105,90,76,62,49,38,28,19,11,6,2,0,0,2,6,11,19,28,38,49,62,76,90,105,120,135,150,164,178,191,202,212,221,229,234,238,240,240,238,234,229,221,212,202,191,178,164,150,135,120,105,90,76,62,49,38,28,19,11,6,2,0,0,2,6,11,19,28,38,49,62,76,90,105,120,135,150,164,178,191,202,212,221,229,234,238,240,240,238,234,229,221,212,202,191,178,164,150,135,120,105,90,76,62,49,38,28,19,11,6,2,0,0,2,6,11,19,28,38,49,62,76,90,105,120,135,150,164,178,191,202,212,221,229,234,238,240,240,238,234,229,221,212,202,191,178,164,150,135,120,105,90,76,62,49,38,28,19,11,6,2,0,0,2,6,11,19,28,38,49,62,76,90,105,120};
extern fontdatatype SmallFont[1144];


void task_pantalla_Init(void)
{
	uint32_t i;


    InitLCD(LANDSCAPE);

    //drawPixel(20,20);
    setFont(SmallFont);
    Chip_GPIO_WritePortBit(LPC_GPIO,0,22,true);
//    drawBitmap(300,0,100,100,utn,1);

    setColor2(255,255,255);
	for (i=1;i<300;i++) drawPixel(i,220);
	for (i=1;i<220;i++) drawPixel(300,i);

}
void task_pantalla (void)
{
	static uint8_t state=0;

	if (state==0)
	{
		setColor2(0,0,0);
		for (i=1;i<300;i++)
			drawPixel(i,sin4[i]/2);
		while (Chip_GPIO_GetPinState(LPC_GPIO,2,10)==1);

		setColor2(255,255,255);
    	print("Vpp=1.5V",305,105,0);
    	print("frec=2Mhz",305,125,0);
    	print("fs=200Mhz",CENTER,225,0);
    	setColor2(0,255,0);
    	for (i=1;i<300;i++)
    	drawPixel(i,(sin[i]/3));
    	state=1;
    	return;
	}
	else if (state==1)
	{
		setColor2(0,0,0);
		for (i=1;i<300;i++)
			drawPixel(i,(sin[i]/3));
		setColor2(255,255,255);
		print("Vpp=10.3V",305,105,0);
		print("frec=1.234Khz",305,125,0);
		print("fs=100khz",CENTER,225,0);

		setColor2(0,255,0);
		for (i=1;i<300;i++)
			drawPixel(i,sin4[i]/2);
		state=0;
		return;
	}
}
